easyblock = 'PythonBundle'

name = 'Spyder'
version = '4.2.5'

homepage = 'https://github.com/spyder-ide/spyder'
description = """Spyder is an interactive Python development environment providing MATLAB-like features in a simple
 and light-weighted software."""

toolchain = {'name': 'foss', 'version': '2021a'}
toolchainopts = {'cstd': 'c++11'}

builddependencies = [
    ('CMake', '3.20.1'),
]
dependencies = [
    ('Python', '3.9.5'),
    ('ZeroMQ', '4.3.4'),
    ('PyQt5', '5.15.4'),
    ('IPython', '7.25.0'),
    ('geopandas', '0.10.2'),
]

use_pip = True

# strip out (too strict version) requirements for pyqt5 and pyqtwebengine,
# because they are not installed with pip, but are provided via the PyQt5 dependency
local_spyder_preinstallopts = (
    """sed -i "s/'pyqt5.*,//g" setup.py && """
    """sed -i "s/'pyqtwebengine.*,//g" setup.py && """
)

exts_list = [
    ('astroid', '2.11.2', {
        'checksums': ['8d0a30fe6481ce919f56690076eafbb2fb649142a89dc874f1ec0e7a011492d0'],
    }),
    ('async_generator', '1.10', {
        'checksums': ['6ebb3d106c12920aaae42ccb6f787ef5eefdcdd166ea3d628fa8476abe712144'],
    }),
    ('autopep8', '1.6.0', {
        'checksums': ['44f0932855039d2c15c4510d6df665e4730f2b8582704fa48f9c55bd3e17d979'],
    }),
    ('binaryornot', '0.4.4', {
        'checksums': ['359501dfc9d40632edc9fac890e19542db1a287bbcfa58175b66658392018061'],
    }),
    ('bleach', '5.0.0', {
        'checksums': ['c6d6cc054bdc9c83b48b8083e236e5f00f238428666d2ce2e083eaa5fd568565'],
    }),
    ('cloudpickle', '2.0.0', {
        'checksums': ['5cd02f3b417a783ba84a4ec3e290ff7929009fe51f6405423cfccfadd43ba4a4'],
    }),
    ('cookiecutter', '1.7.3', {
        'checksums': ['6b9a4d72882e243be077a7397d0f1f76fe66cf3df91f3115dbb5330e214fa457'],
    }),
    ('decorator', '5.1.1', {
        'checksums': ['637996211036b6385ef91435e4fae22989472f9d571faba8927ba8253acbc330'],
    }),
    ('diff-match-patch', '20200713', {
        'checksums': ['da6f5a01aa586df23dfc89f3827e1cafbb5420be9d87769eeb079ddfd9477a18'],
    }),
    ('flake8', '4.0.1', {
        'checksums': ['806e034dda44114815e23c16ef92f95c91e4c71100ff52813adf7132a6ad870d'],
    }),
    ('helpdev', '0.7.1', {
        'checksums': ['bb62a79acbac141dadf42cadeb92bb7450dd18b9824a62043b6a0b149190db3d'],
    }),
    ('isort', '5.10.1', {
        'use_pip': False,
        'checksums': ['e8443a5e7a020e9d7f97f1d7d9cd17c88bcb3bc7e218bf9cf5095fe550be2951'],
    }),
    ('jedi', '0.18.1', {
        'checksums': ['74137626a64a99c8eb6ae5832d99b3bdd7d29a3850fe2aa80a4126b2a7d949ab'],
    }),
    ('jeepney', '0.8.0', {
        'use_pip': False,
        'checksums': ['5efe48d255973902f6badc3ce55e2aa6c5c3b3bc642059ef3a91247bcfcc5806'],
    }),
    ('arrow', '1.2.2', {
        'checksums': ['05caf1fd3d9a11a1135b2b6f09887421153b94558e5ef4d090b567b47173ac2b'],
    }),
    ('jinja2-time', '0.2.0', {
        'checksums': ['d14eaa4d315e7688daa4969f616f226614350c48730bfa1692d2caebd8c90d40'],
    }),
    ('jupyterlab_pygments', '0.2.1', {
        'checksums': ['121da770930e348895f89d6bdfce7e7e6a8bb574162923f9c9ef5a20c61619c6'],
    }),
    ('keyring', '23.5.0', {
        'checksums': ['9012508e141a80bd1c0b6778d5c610dd9f8c464d75ac6774248500503f972fb9'],
    }),
    ('keyrings.alt', '4.1.0', {
        'checksums': ['52ccb61d6f16c10f32f30d38cceef7811ed48e086d73e3bae86f0854352c4ab2'],
    }),
    ('lazy-object-proxy', '1.7.1', {
        'checksums': ['d609c75b986def706743cdebe5e47553f4a5a1da9c5ff66d76013ef396b5a8a4'],
    }),
    ('mccabe', '0.7.0', {
        'checksums': ['348e0240c33b60bbdf4e523192ef919f28cb2c3d7d5c7794f74009290f236325'],
    }),
    ('jupyter_client', '7.2.2', {
        'checksums': ['8fdbad344a8baa6a413d86d25bbf87ce21cb2b4aa5a8e0413863b9754eb8eb8a'],
    }),
    ('nbclient', '0.6.0', {
        'checksums': ['3f89a403c6badf24d2855a455b69a80985b3b27e04111243fdb6a88a28d27031'],
    }),
    ('nest_asyncio', '1.5.5', {
        'checksums': ['e442291cd942698be619823a17a86a5759eabe1f8613084790de189fe9e16d65'],
    }),
    ('numpydoc', '1.2.1', {
        'checksums': ['7ce826ed0d54c3fdc9097992a8d73a4d459dc468611351c68e444fec44a45af6'],
    }),
    ('pathtools', '0.1.2', {
        'checksums': ['7c35c5421a39bb82e58018febd90e3b6e5db34c5443aaaf742b3f33d4655f1c0'],
    }),
    ('poyo', '0.5.0', {
        'checksums': ['e26956aa780c45f011ca9886f044590e2d8fd8b61db7b1c1cf4e0869f48ed4dd'],
    }),
    ('pycodestyle', '2.8.0', {
        'checksums': ['eddd5847ef438ea1c7870ca7eb78a9d47ce0cdb4851a5523949f2601d0cbbe7f'],
    }),
    ('pydocstyle', '6.1.1', {
        'checksums': ['1d41b7c459ba0ee6c345f2eb9ae827cab14a7533a88c5c6f7e94923f72df92dc'],
    }),
    ('pyflakes', '2.4.0', {
        'checksums': ['05a85c2872edf37a4ed30b0cce2f6093e1d0581f8c19d7393122da7e25b2b24c'],
    }),
    ('pylint', '2.13.5', {
        'checksums': ['dab221658368c7a05242e673c275c488670144123f4bd262b2777249c1c0de9b'],
    }),
    ('ujson', '5.2.0', {
        'checksums': ['163191b88842d874e081707d35de2e205e0e396e70fd068d1038879bca8b17ad'],
    }),
    ('python-language-server', '0.36.2', {
        'modulename': 'pyls',
        'checksums': ['9984c84a67ee2c5102c8e703215f407fcfa5e62b0ae86c9572d0ada8c4b417b0'],
    }),
    ('pyrsistent', '0.18.1', {
        'checksums': ['d4d61f8b993a7255ba714df3aca52700f8125289f84f704cf80916517c46eb96'],
    }),
    ('python-jsonrpc-server', '0.4.0', {
        'modulename': 'pyls_jsonrpc',
        'checksums': ['62c543e541f101ec5b57dc654efc212d2c2e3ea47ff6f54b2e7dcb36ecf20595'],
    }),
    ('python-slugify', '6.1.1', {
        'modulename': 'slugify',
        'checksums': ['00003397f4e31414e922ce567b3a4da28cf1436a53d332c9aeeb51c7d8c469fd'],
    }),
    ('pyxdg', '0.27', {
        'modulename': 'xdg',
        'checksums': ['80bd93aae5ed82435f20462ea0208fb198d8eec262e831ee06ce9ddb6b91c5a5'],
    }),
    ('rope', '1.0.0', {
        'checksums': ['16f652d3002296778d463db329da6a05d914a4dbde30ea6da76362da06c0ebb7'],
    }),
    ('QDarkStyle', '3.0.3', {
        'checksums': ['936d2d35b552f429803a985dbc17fc879a2f966faa9fbf8983896ccfa33e68f6'],
    }),
    ('QtAwesome', '1.1.1', {
        'checksums': ['ec02e200231fa68a146a93845890aa0432a7edcba14bf811ff6975cf9acdab5d'],
    }),
    ('qtconsole', '5.3.0', {
        'checksums': ['8e3520fdc75e46abc4cc6cffeca16fa2652754109b8ae839fa28e27d1eba5625'],
    }),
    ('QtPy', '2.0.1', {
        'checksums': ['adfd073ffbd2de81dc7aaa0b983499ef5c59c96adcfdcc9dea60d42ca885eb8f'],
    }),
    ('SecretStorage', '3.3.1', {
        'modulename': 'secretstorage',
        'checksums': ['fd666c51a6bf200643495a04abb261f83229dcb6fd8472ec393df7ffc8b6f195'],
    }),
    ('spyder', version, {
        'preinstallopts': """sed -i "s/'pyqt5.*,//g" setup.py && sed -i "s/'pyqtwebengine.*,//g" setup.py && """,
        'checksums': ['03159003f6ea51458e10000091e65e77888b095dba48e64ca2b36c75a648580c'],
    }),
    ('spyder-kernels', '2.3.0', {
        'modulename': 'spyder_kernels',
        'checksums': ['a5d536d0e8a5e774d7d616c102a8fa2d6aa45fd330a0b799b98eef158356d36c'],
    }),
    ('text-unidecode', '1.3', {
        'checksums': ['bad6603bb14d279193107714b288be206cac565dfa49aa5b105294dd5c4aab93'],
    }),
    ('traitlets', '5.1.1', {
        'checksums': ['059f456c5a7c1c82b98c2e8c799f39c9b8128f6d0d46941ee118daace9eb70c7'],
    }),
    ('typed_ast', '1.5.2', {
        'checksums': ['525a2d4088e70a9f75b08b3f87a51acc9cde640e19cc523c7e41aa355564ae27'],
    }),
    ('watchdog', '2.1.7', {
        'checksums': ['3fd47815353be9c44eebc94cc28fe26b2b0c5bd889dafc4a5a7cbdf924143480'],
    }),
    ('wurlitzer', '3.0.2', {
        'checksums': ['36051ac530ddb461a86b6227c4b09d95f30a1d1043de2b4a592e97ae8a84fcdf'],
    }),
    ('wrapt', '1.14.0', {
        'checksums': ['8323a43bd9c91f62bb7d4be74cc9ff10090e7ef820e27bfe8815c57e68261311'],
    }),
    ('yapf', '0.32.0', {
        'checksums': ['a3f5085d37ef7e3e004c4ba9f9b3e40c54ff1901cd111f05145ae313a7c67d1b'],
    }),
]

sanity_check_paths = {
    'files': ['bin/spyder3'],
    'dirs': ['lib/python%(pyshortver)s/site-packages'],
}

sanity_check_commands = ["spyder3 --help"]

sanity_pip_check = True

moduleclass = 'tools'
